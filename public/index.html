<!Doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="icon" href="seventh-day-adventist-logo.png" type="image/gif" alt="logo" sizes="32x21">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <title>Steward!</title>
</head>

<body class="container display: flex" style="font-family:Cambria">
    <nav class="navbar navbar-light fixed-top" style="background-color: #e3f2fd;">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
               <label>LSDA</label>
            </a>
        </div>
    </nav>
    

    <!-- Optional JavaScript; choose one of the two! -->
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
    <div class="container col-sm-8 ">
        <form id="giving-form" method="POST" target="#">
            <h2 class="container" style="color:brown"><strong>TITHE AND OFFERING</strong></h2>

            <div>
                <span class="input-group-text"><strong> MEMBERSHIP</strong></span>
            </div>
            <div class="input-group">
                <span class="input-group-text">Congregation :</span>
                <select id="membership" class="form-control" aria-label="Membership">
                    <option value="guest">Guest</option>
                    <option value="westlands">Westlands SS </option>
                    <option value="jamhuri">Jamhuri SS</option>
                    <option value="lavington">Lavington</option>
                </select>
            </div>
            <div class="input-group">
                <span class="input-group-text">Name :</span>
                <input type="text" id="tithe" class="form-control amount" placeholder="FULL NAME" aria-label="full_name">
            </div>

            <div>
                <span class="input-group-text"><strong> LOCAL CHURCH BUDGET</strong></span>
            </div>
            <div class="input-group">
                <span class="input-group-text">God's Holy Tithe (10%)</span>
                <input type="text" onblur="findTotal()" id="tithe" class="form-control amount" placeholder="KES" aria-label="Amount">
            </div>
            <div class="input-group">
                <span class="input-group-text">Sabbath School</span>
                <input type="text" onblur="findTotal()" id="sabbathschool" class="form-control amount" placeholder="KES" aria-label="Amount">
            </div>
            <div class="input-group">
                <span class="input-group-text">Evangelism/Missionary</span>
                <input type="text" onblur="findTotal()" id="evangelism" class="form-control amount" placeholder="KES" aria-label="Amount">
            </div>
            <div class="input-group">
                <span class="input-group-text">Church Expenses</span>
                <input type="text" onblur="findTotal()" id="expenses" class="form-control amount" placeholder="KES" aria-label="Amount">
            </div>
            <div class="input-group">
                <span class="input-group-text">Building Fund</span>
                <input type="text" onblur="findTotal()" id="building" class="form-control amount" placeholder="KES" aria-label="Amount">
            </div>
            <div class="input-group">
                <span class="input-group-text">Youth Fund</span>
                <input type="text" onblur="findTotal()" id="youth" class="form-control amount" placeholder="KES" aria-label="Amount">
            </div>
            <div class="input-group">
                <span class="input-group-text">Combined offering</span>
                <input type="text" onblur="findTotal()" id="combinedoff" class="form-control amount" placeholder="KES" aria-label="Amount">
            </div>
            <div class="bg-">
                <span class="input-group-text"><strong> GENERAL CONFERENCE </strong></span>
            </div>
            <div class="input-group">
                <span class="input-group-text">Camp Meeting Offering</span>
                <input type="text" onblur="findTotal()" id="campoffering" class="form-control amount" placeholder="KES" aria-label="Amount">
            </div>
            <div class="input-group">
                <span class="input-group-text">Camp Meeting Budget</span>
                <input type="text" onblur="findTotal()" id="campbudget" class="form-control amount" placeholder="KES" aria-label="Amount">

            </div>
            <div class="input-group">
                <span class="input-group-text">Good Samaritan</span>
                <input type="text" onblur="findTotal()" id="gdsamaritan" class="form-control amount" placeholder="KES" aria-label="Amount">

            </div>
            <div class="input-group">
                <span class="input-group-text"> PHONE</span>
                <input type="text" id="mobile_no" class="form-control" value="254" min="11" aria-label="phone">
            </div>

            <div class="">
                <strong> TOTAL ENCLOSED</strong>
                <input type="text" id="totalsum" onblur="findTotal()" class="form-control" placeholder="TOTAL " aria-label="Total" disabled>
                <input type="submit" class="btn btn-primary" value="CHECKOUT" />
            </div>

        </form>
        </div>
    <footer class="container footer no-padding">
        <p style="color:dodgerblue">Bank Details</p>
        <p>Barclays Bank, Hurlingham Branch</p>
        <p>Acc Name: SDA Church, Lavington</p>
        <p>Operations: 202 584 7604</p>
        <p>Development: 202 584 7582</p>
        <p> USD: 202 584 7590</p>
</footer>
</body>
</html>
<script>

    function findTotal() {

        var arr = document.getElementsByClassName('amount');
        var tot = 0;
        for (var i = 0; i < arr.length; i++) {
            if (parseFloat(arr[i].value))
                tot += parseFloat(arr[i].value);
        }
        document.getElementById('totalsum').value = tot;
        return tot;
    }

    function sendstk() {
        p = document.getElementById('mobile_no').value;
        phone = 254 + (p.substr(-9));
        pesa = findTotal();
        let url = 'https://romeofoxalpha.co.ke/carwash/stkpush.php?phone=' + phone + '&amount=' + pesa;
        //encode the data on transit
        let request = new XMLHttpRequest();
        request.open('POST', url);
        request.onload = function () {

            var res = JSON.parse(request.response);
            if (res.ResponseCode == 0) {
                alert('Request Sent...' + `${res.CustomerMessage}`);
                $('#giving-form')[0].reset();
            }
            else if (res.errorCode = '400') {
                alert('Failed. Try again...'+`${res.errorMessage}`);
            }


        };

        request.send();
    }

    $("#giving-form").submit(function (event) {
            sendstk();
        event.preventDefault();
    });

</script>
